(this["webpackJsonpreddit-client"]=this["webpackJsonpreddit-client"]||[]).push([[0],{31:function(e,t,a){},59:function(e,t,a){"use strict";a.r(t);var r=a(1),s=a.n(r),n=a(10),c=a.n(n),i=(a(31),a(2)),d=a(5),o=Object(d.c)({name:"app",initialState:{theme:"light"},reducers:{updateTheme:function(e,t){e.theme=t.payload}}}),l=function(e){return e.app.theme},m=o.actions.updateTheme,u=o.reducer,b=Object(d.c)({name:"searchField",initialState:{searchText:""},reducers:{updateSearchText:function(e,t){e.searchText=t.payload}}}),j=function(e){return e.searchField.searchText},x=b.actions.updateSearchText,h=b.reducer,p=a(0);function g(){var e=Object(i.b)(),t=Object(i.c)(j);return Object(p.jsxs)("div",{id:"search",className:"flex flex-1 mx-4 max-w-sm relative",children:[Object(p.jsx)("input",{type:"search",placeholder:"Search Reddit",value:t,onChange:function(t){return e(x(t.target.value))},className:"flex-1 w-full border-solid border-2 dark:bg-gray-600 border-gray-300 dark:border-gray-500 rounded-md pl-10 pr-4 py-2"}),Object(p.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 absolute left-4 top-3 text-gray-700 dark:text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(p.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})}function f(){var e=Object(i.b)();return Object(p.jsxs)("div",{id:"dark-mode-toggle",className:"hidden sm:flex border-solid border-2 border-gray-300 dark:border-gray-500 rounded-md divide-x-2 divide-gray-300 dark:divide-gray-500 divide-solid",children:[Object(p.jsx)("button",{id:"light-mode","data-testid":"btn-light-mode",className:"px-4 py-2 text-primary dark:text-gray-50",onClick:function(){return e(m("light"))},children:Object(p.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 pointer-events-none",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(p.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})})}),Object(p.jsx)("button",{id:"dark-mode","data-testid":"btn-dark-mode",className:"px-4 py-2 dark:text-primary",onClick:function(){return e(m("dark"))},children:Object(p.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 pointer-events-none",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(p.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})})})]})}function v(){return Object(p.jsx)("header",{className:"fixed z-20 min-w-full shadow-lg bg-white dark:bg-gray-700 dark:text-gray-50",children:Object(p.jsxs)("div",{className:"container mx-auto px-4 h-20 flex justify-between items-center",children:[Object(p.jsxs)("div",{id:"logo",className:"flex items-center",children:[Object(p.jsx)("img",{className:"w-8 fill-current text-green-600",src:"reddit-logo.svg",alt:"reddit logo"}),Object(p.jsxs)("h1",{className:"pl-2 sm:text-xl font-semibold",children:[Object(p.jsx)("span",{className:"font-bold",children:"Reddit"})," Client"]})]}),Object(p.jsx)(g,{}),Object(p.jsx)(f,{})]})})}var O=a(7),w=a.n(O),y=a(11),k=a(12),N=a.n(k),C=Object(d.b)("posts/fetchPosts",function(){var e=Object(y.a)(w.a.mark((function e(t){var a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get(t);case 2:return a=e.sent,e.abrupt("return",a.data.data.children);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),S=Object(d.c)({name:"posts",initialState:{isLoading:!1,hasErrors:!1,posts:[{data:{id:1,created:"",ups:"",num_comments:"",title:"",selftext:" ",author:""}},{data:{id:2,created:"",ups:"",num_comments:"",title:"",selftext:" ",author:""}},{data:{id:3,created:"",ups:"",num_comments:"",title:"",selftext:" ",author:""}},{data:{id:4,created:"",ups:"",num_comments:"",title:"",selftext:" ",author:""}},{data:{id:5,created:"",ups:"",num_comments:"",title:"",selftext:" ",author:""}}]},reducers:{},extraReducers:function(e){e.addCase(C.pending,(function(e,t){e.isLoading=!0})).addCase(C.fulfilled,(function(e,t){e.posts=t.payload,e.isLoading=!1})).addCase(C.rejected,(function(e,t){e.hasErrors=!0,e.isLoading=!1}))}}),L=function(e){return e.posts},M=S.reducer,_=Object(d.c)({name:"subreddits",initialState:{activeSubreddit:"Popular",subreddits:[{icon:"https://api.adorable.io/avatars/25/Home",title:"Popular"},{icon:"https://b.thumbs.redditmedia.com/EndDxMGB-FTZ2MGtjepQ06cQEkZw_YQAsOUudpb9nSQ.png",title:"AskReddit"},{icon:"https://a.thumbs.redditmedia.com/nmh5l-zCsmmc3y2ehfjtWRJjGmCEWEJDTjtW3AGMz60.png",title:"Wallstreetbets"},{icon:"https://b.thumbs.redditmedia.com/0PgZl68jAxA6T1BH6uvUQ5Bz1F1GrrJLCL8oi2Gz0Ak.png",title:"Gaming"},{icon:"https://b.thumbs.redditmedia.com/Kl3TBjINRBLd9sukJaSPts_0geISdO-jtVniyfCw1GA.png",title:"CryptoCurrency"},{icon:"https://a.thumbs.redditmedia.com/4SKK4rzvSSDPLWbx4kt0BvE7B-j1UQBLZJsNCGgMz54.png",title:"Germany"},{icon:"https://styles.redditmedia.com/t5_2twpw/styles/communityIcon_8bhyo9k303x71.png",title:"Blackcats"},{icon:"https://api.adorable.io/avatars/25/Home",title:"Cooking"},{icon:"https://b.thumbs.redditmedia.com/B7IpR8P1mEsQIjdizK5x79s5aGfJUtKk3u2ksGZ9n2Q.png",title:"Todayilearned"},{icon:"https://styles.redditmedia.com/t5_2xiqj/styles/communityIcon_zvmcowk0d0671.jpg?format=pjpg&s=1537e0d3fd8639bce301c389ef60e99f44587d0a",title:"Aoe4"},{icon:"https://styles.redditmedia.com/t5_2qgzy/styles/communityIcon_rvt3zjh1fc551.png",title:"Sports"},{icon:"https://a.thumbs.redditmedia.com/E0Bkwgwe5TkVLflBA7WMe9fMSC7DV2UOeff-UpNJeb0.png",title:"News"},{icon:"https://styles.redditmedia.com/t5_2s9h3/styles/communityIcon_ujdrcdijabb61.png",title:"DunderMifflin"}]},reducers:{updateActiveSubreddit:function(e,t){e.activeSubreddit=t.payload}}}),B=function(e){return e.subreddits.subreddits},z=function(e){return e.subreddits.activeSubreddit},I=_.actions.updateActiveSubreddit,T=_.reducer,A=a(6),E=a(13),W=a.n(E),G=a(26),J=a(3);a(24);function Q(e){var t=e.className;return Object(p.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 pointer-events-none "+t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(p.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"})})}function P(e){var t=e.post,a=e.toggleModal;return t?Object(p.jsx)("div",{id:"post-modal",className:"w-screen h-screen fixed bg-gray-900 bg-opacity-75 inset-0 flex items-center justify-center z-10 overflow-y-auto",onClick:a,role:"dialog",children:Object(p.jsx)(K,{post:t,className:"max-w-screen-lg mx-4"})}):Object(p.jsx)("p",{className:"text-red-600",children:"Couldn't load post"})}function R(e){var t=e.comment,a=W()(1e3*t.data.created).fromNow();return Object(p.jsxs)("div",{id:"comment",className:"mb-2 px-8 py-3 bg-gray-100 dark:bg-gray-600 rounded-md hover:shadow",children:[Object(p.jsxs)("div",{className:"flex justify-between pb-2",children:[Object(p.jsx)("div",{className:"font-semibold text-sm",children:t.data.author}),Object(p.jsx)("div",{className:"text-xs",children:a})]}),Object(p.jsx)("p",{children:t.data.body})]})}function F(e){var t=e.postSubreddit,a=e.postId,s=Object(r.useState)([]),n=Object(A.a)(s,2),c=n[0],i=n[1],d=Object(r.useState)(!1),o=Object(A.a)(d,2),l=o[0],m=o[1],u=Object(r.useState)(!1),b=Object(A.a)(u,2),j=b[0],x=b[1];return Object(r.useEffect)((function(){(function(){var e=Object(y.a)(w.a.mark((function e(){var r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(!0),e.next=4,N.a.get("https://www.reddit.com/r/".concat(t,"/comments/").concat(a,".json"));case 4:r=e.sent,i(r.data[1].data.children),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),x(!0);case 11:return e.prev=11,m(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})));return function(){return e.apply(this,arguments)}})()()}),[t,a]),Object(p.jsxs)("div",{id:"post-comments",className:"mt-2","data-testid":"comments-wrapper",children:[l&&Object(p.jsx)(J.b,{count:3}),j&&Object(p.jsx)("h2",{className:"mb-8 p-6 bg-white rounded-md shadow-lg text-xl text-red-500 font-bold",children:"Cannot display comments..."}),!j&&!l&&c.slice(0,10).map((function(e){return Object(p.jsx)(R,{comment:e,isLoading:l},e.data.id)}))]})}function U(e){var t=e.className,a=e.testId;return Object(p.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 pointer-events-none "+t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","data-testid":a,children:Object(p.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 11l3-3m0 0l3 3m-3-3v8m0-13a9 9 0 110 18 9 9 0 010-18z"})})}function D(e){var t=e.votes,a=e.isLoading,s=Object(r.useState)(""),n=Object(A.a)(s,2),c=n[0],i=n[1],d=H(t),o=function(e){i(c===e?"":e)};return Object(p.jsxs)("div",{id:"votes",className:"pr-6 flex flex-col items-center",children:[Object(p.jsx)("button",{onClick:function(){return o("upvote")},className:"text-gray-500 dark:text-gray-300 hover:text-green-500","aria-label":"upvote",children:Object(p.jsx)(U,{className:"transform transition duration-300 ".concat("upvote"===c?"text-green-500 scale-125":""),testId:"upvote-arrow"})}),Object(p.jsx)("p",{className:"my-1.5 text-lg font-bold",children:a?Object(p.jsx)(J.b,{height:24,width:31}):d}),Object(p.jsx)("button",{onClick:function(){return o("downvote")},className:"text-gray-500 dark:text-gray-300 hover:text-red-500","aria-label":"downvote",children:Object(p.jsx)(U,{className:"transform transition duration-300 rotate-180 ".concat("downvote"===c?"text-red-500 scale-125":"","\n    "),testId:"downvote-arrow"})})]})}var H=function(e){return Math.abs(e)>999?Math.sign(e)*(Math.abs(e)/1e3).toFixed(1)+"k":Math.sign(e)*Math.abs(e)};function K(e){var t=e.post,a=e.className,s=void 0===a?"":a,n=Object(i.c)(L).isLoading,c=Object(i.c)(l),d=W()(1e3*t.data.created).fromNow(),o=H(t.data.num_comments),m=Object(r.useState)(!1),u=Object(A.a)(m,2),b=u[0],j=u[1],x=Object(r.useState)(!1),h=Object(A.a)(x,2),g=h[0],f=h[1],v=function(e){e.target===e.currentTarget&&"post-modal"!==e.target.parentNode.parentNode.parentNode.id&&j(!b)};return Object(p.jsxs)("article",{className:"mb-8 p-6 bg-white text-gray-800 dark:bg-gray-700 dark:text-gray-50 rounded-md shadow-lg hover:shadow-xl transition-shadow duration-300 flex z-20 ".concat(s),children:[b&&Object(p.jsx)(P,{post:t,toggleModal:v}),Object(p.jsxs)(J.a,{baseColor:"dark"===c?"#4b5563":"",highlightColor:"dark"===c?"#6b7280":"",children:[Object(p.jsx)(D,{votes:t.data.ups,isLoading:n}),Object(p.jsxs)("div",{id:"post-content",className:"flex-1 overflow-hidden",children:[Object(p.jsx)("h2",{className:"mb-4 text-xl font-semibold cursor-pointer",onClick:v,children:n?Object(p.jsx)(J.b,{}):t.data.title}),n?Object(p.jsx)(J.b,{}):"image"===t.data.post_hint?Object(p.jsx)("img",{src:t.data.url,alt:"",className:"rounded-md max-h-80"}):void 0,n?Object(p.jsx)(J.b,{}):t.data.is_video?Object(p.jsx)("video",{className:"max-h-80",controls:!0,children:Object(p.jsx)("source",{src:t.data.media.reddit_video.fallback_url,type:"video/mp4"})}):void 0,n?Object(p.jsx)(J.b,{count:4}):t.data.selftext?Object(p.jsx)(G.a,{options:{overrides:{a:{props:{className:"underline hover:text-primary"}},p:{props:{className:"mb-2"}}}},children:t.data.selftext}):void 0,n?Object(p.jsx)(J.b,{}):"link"===t.data.post_hint?Object(p.jsx)("a",{href:t.data.url,className:"underline hover:text-primary","data-testid":"post-link",children:t.data.url}):void 0,Object(p.jsx)("hr",{className:"mt-4"}),Object(p.jsxs)("div",{id:"post-footer",className:"flex flex-wrap justify-between px-8 py-2 gap-2",children:[Object(p.jsx)("div",{className:"font-semibold text-sm",children:n?Object(p.jsx)(J.b,{width:100}):t.data.author}),Object(p.jsx)("div",{className:"text-xs",children:n?Object(p.jsx)(J.b,{width:100}):d}),Object(p.jsxs)("div",{className:"flex text-sm",children:[Object(p.jsx)("button",{className:"text-gray-500 dark:text-gray-300 hover:text-gray-800 dark:hover:text-gray-50",onClick:function(){return f(!g)},"aria-label":"Comments",children:Object(p.jsx)(Q,{className:"mr-1 transition duration-300"})}),n?Object(p.jsx)(J.b,{width:75}):o]})]}),g&&Object(p.jsx)(F,{postSubreddit:t.data.subreddit,postId:t.data.id})]})]})]})}function Z(){var e=Object(i.c)(L),t=e.posts,a=e.hasErrors,s=Object(i.c)(z),n=Object(i.c)(j),c=Object(i.b)(),d=t.filter((function(e){return e.data.title.toLowerCase().trim().includes(n.toLowerCase().trim())}));return Object(r.useEffect)((function(){c(C("https://www.reddit.com/r/".concat(s,".json")))}),[c,s]),Object(p.jsxs)("section",{className:"lg:w-2/3 mx-4 flex-auto","aria-label":"posts",children:[a&&Object(p.jsx)("h2",{className:"mb-8 p-6 bg-white rounded-md shadow-lg text-xl text-red-500 font-bold",children:"Cannot display posts..."}),!a&&d&&d.map((function(e){return Object(p.jsx)(K,{post:e},e.data.id)}))]})}function V(e){var t=e.subreddit,a=void 0===t?{icon:"",title:""}:t,r=e.active,s=Object(i.b)();return Object(p.jsxs)("button",{className:"w-full flex items-center p-4 rounded-md transition-colors hover:text-primary ".concat(r?"bg-gray-100 dark:bg-gray-600":""),onClick:function(){return s(I(a.title))},children:[Object(p.jsx)("img",{src:a.icon,alt:"",className:"w-6 h-6 mr-2 border border-gray-500 rounded-full"}),Object(p.jsx)("p",{className:"font-semibold",children:a.title})]})}function q(){var e=Object(i.c)(B),t=Object(i.c)(z);return Object(p.jsx)("section",{className:"lg:mx-4 lg:w-1/3 lg:ml-0 flex-auto","aria-label":"subreddits",children:Object(p.jsxs)("div",{className:"p-6 bg-white dark:bg-gray-700 sm:rounded-md shadow-lg",children:[Object(p.jsx)("h2",{className:"text-xl font-bold",children:"Subreddits"}),Object(p.jsx)("div",{className:"mt-4",children:e.map((function(e){return Object(p.jsx)(V,{subreddit:e,active:t===e.title},e.title)}))})]})})}var Y=function(){var e=Object(i.c)(l);return Object(p.jsx)("div",{className:"App ".concat("light"===e?"":"dark"),"data-testid":"app-wrapper",children:Object(p.jsxs)("div",{className:"bg-gray-100 dark:bg-gray-600 dark:text-gray-50 min-h-screen",children:[Object(p.jsx)(v,{}),Object(p.jsxs)("main",{className:"container mx-auto pt-24 flex flex-col lg:flex-row",children:[Object(p.jsx)(Z,{}),Object(p.jsx)(q,{})]})]})})},$=Object(d.a)({reducer:{app:u,posts:M,subreddits:T,searchField:h}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(Object(p.jsx)(s.a.StrictMode,{children:Object(p.jsx)(i.a,{store:$,children:Object(p.jsx)(Y,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[59,1,2]]]);
//# sourceMappingURL=main.f256cada.chunk.js.map